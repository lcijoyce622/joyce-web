<script setup>
//- ç¶“æ­·é é¢(æ™‚é–“è»¸)
import gsap from "gsap";
import ScrollTrigger from "gsap/ScrollTrigger";
import { ref } from "vue";
gsap.registerPlugin(ScrollTrigger);

import { onMounted } from "vue";
const gif = ref(new URL(`../assets/pixel.gif`, import.meta.url).href)
onMounted(() => {
  const line = document.querySelector(".line")

  ScrollTrigger.create({
    //ä»¥box2ä½œç‚ºè§¸ç™¼æ™‚æ©Ÿ
    trigger: line,
    // markers: true,
    //å‘ä¸‹æ»¾å‹•é€²å…¥starté»æ™‚è§¸ç™¼callback
    onEnter: function () {
      gsap.to('.line',{ duration: 20, delay: 1, height: "100%", visibility: "visible", ease: "expo"})
      gsap.to('.dot', { opacity: 1, delay: 1, duration: 0 ,ease: "expo"})
      gsap.from('.item0', { opacity: 0, delay: 1, duration: 2 ,ease: "expo", y: 100})
      gsap.from('.item1', { opacity: 0, delay: 1.5, duration: 2 ,ease: "expo", y: 100})
      gsap.from('.item2', { opacity: 0, delay: 2, duration: 2 ,ease: "expo", y: 100})
      gsap.from('.item3', { opacity: 0, delay: 2.5, duration: 2 ,ease: "expo", y: 100})

    },
  });

})

const  experienceDataArr = [
  {
    title:"å‰é€²ä¸­",
    date:"2023 - NOW",
    descrArr:[
      {
        subtitle:"æŒçºŒå­¸ç¿’ ğŸƒğŸ»â€â™€ï¸",
        desc: [
          "æŒçºŒå­¸ç¿’Vue3ã€TypeScriptã€Nuxt3ã€React..."
        ]
      },
      {
        subtitle:"åƒèˆ‡è¬›åº§",
        desc: [
          "é—œæ³¨å‰ç«¯è¶¨å‹¢ï¼ŒåƒåŠ  Mopcon 2022ã€Agile Summit 2023ã€GitHub Copilot é–‹ç™¼è€…è¨“ç·´ç‡Ÿ..."
        ]
      }
    ],
    color:"#3C84D3"
  },
  {
    title:"æ³°çˆ¾ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸",
    date:"2021 - 2023",
    descrArr:[
      {
        subtitle:"å‰ç«¯å·¥ç¨‹å¸«",
        desc: [
          "ä½¿ç”¨ Vue 2 å’Œ Nuxt 2 é–‹ç™¼å®˜ç¶²ï¼Œå„ªåŒ– SEOã€æé«˜ç”¢å“æ›å…‰åº¦ã€‚",
          "éµå¾ª RWD åŸå‰‡ï¼Œç¢ºä¿ç¶²ç«™è‡ªé©æ‡‰ä¸¦æä¾›æœ€ä½³æ•ˆæœã€‚",
          "ä½¿ç”¨ Vue CLI é–‹ç™¼å¾Œå°ç³»çµ±ï¼Œå„ªåŒ–è¨‚å–®ã€åº«å­˜ç®¡ç†ã€ç”¨æˆ¶ç®¡ç†ç­‰æ¥­å‹™é‚è¼¯ã€‚",
          "ä½¿ç”¨ JavaScript å¯¦ç¾åŠŸèƒ½éœ€æ±‚ã€‚",
          "ä½¿ç”¨ HTMLã€Sass å’Œ CSS å¯¦ç¾ Figma è¨­è¨ˆç¨¿ã€‚",
          "ä¸²æ¥ç¬¬ä¸‰æ–¹ Line Login APIã€‚",
          "é–‹ç™¼å®˜ç¶²æ´»å‹•é é¢ï¼Œç¶­è­·ç¶²ç«™ã€‚",
          "ä½¿ç”¨ Git ç‰ˆæœ¬æ§åˆ¶ï¼Œä½¿ç”¨ Github Actions æ‰“ç‰ˆåŠéƒ¨ç½²ã€‚",
          "èˆ‡ PMã€UI/UX è¨­è¨ˆå¸«ã€å¾Œç«¯åœ˜éšŠå¯†åˆ‡åˆä½œï¼Œåƒèˆ‡éœ€æ±‚è¨è«–ã€åŠŸèƒ½è¨­è¨ˆå’Œ API è¨­è¨ˆã€‚",
          "æ“”ä»»å°ˆæ¡ˆè² è²¬äººï¼Œå”èª¿å°ˆæ¡ˆé€²åº¦ã€åˆ†é…å·¥ä½œã€å”èª¿éœ€æ±‚å’Œé–‹ç™¼é€²åº¦ã€‚",
          "å”åŠ©æ–°äººç†Ÿæ‚‰å…¬å¸é–‹ç™¼æµç¨‹ï¼Œä¸¦å”åŠ©è§£æ±ºå•é¡Œã€‚",
          "å­¸ç¿’æ–°çš„å‰ç«¯æŠ€è¡“å’Œå·¥å…·ï¼ŒæŒçºŒæå‡æŠ€è¡“èƒ½åŠ›ã€‚",
        ]
      }
    ],
    color:"#9325D1"
  },
  {
    title:"ç²¾é€²è‡ªå·±æœ‰èˆˆè¶£çš„é ˜åŸŸã€äº†è§£æŠ€è¡“å…§å®¹",
    date:"2019 - 2021",
    descrArr:[
      {
        subtitle:"ç•¢æ¥­å¾Œï½œç²¾é€²è‡ªå·±æœ‰èˆˆè¶£çš„é ˜åŸŸã€äº†è§£æŠ€è¡“å…§å®¹ï¼š",
        desc: [
          "å‰ç«¯ç¶²é èª²ç¨‹ï¼šåƒåŠ äº†RWDå‰ç«¯ç¶²é è¨­è¨ˆèª²ç¨‹ï¼Œå­¸ç¿’å…¨æ–¹ä½çš„ç¶²é é–‹ç™¼æŠ€èƒ½ã€‚ä¸¦åœ¨çµè¨“æ™‚å®Œæˆåœ˜é«”å°ˆé¡Œ â€“ å±±é‡é–ƒéˆã€‚",
          "è¨­è¨ˆå·¥å…·ï¼šç†Ÿç·´é‹ç”¨è¨­è¨ˆå·¥å…·å¦‚PSå’ŒAIï¼Œèƒ½å¤ å°‡è¨­è¨ˆè½‰åŒ–ç‚ºåˆ‡ç‰ˆå’ŒåŠŸèƒ½é–‹ç™¼ã€‚",
          "æŠ€è¡“å·¥å…·ï¼šç†Ÿæ‚‰ä½¿ç”¨jQueryå’ŒBootstrapç­‰å‰ç«¯å·¥å…·ï¼Œä¸¦æŒçºŒå„ªåŒ–è‡ªå·±çš„æŠ€èƒ½ã€‚",
          "åœ˜éšŠè§’è‰²ï¼šåœ¨åœ˜éšŠå°ˆæ¡ˆä¸­æ“”ä»»ç¨‹å¼æ’°å¯«å’Œæ•´åˆçš„è§’è‰²ï¼Œç‚ºåœ˜éšŠçš„æˆåŠŸåšå‡ºè²¢ç»ã€‚",
          "è¨­è¨ˆé‚è¼¯å’ŒUI/UXï¼šå­¸ç¿’è¨­è¨ˆçš„é‚è¼¯æ¦‚å¿µï¼Œæ·±å…¥ç†è§£UI/UXçš„é‡è¦æ€§ï¼Œæå‡èˆ‡è¨­è¨ˆå¸«çš„åˆä½œèƒ½åŠ›ã€‚"
        ]
      },
      {
        subtitle:"ç·šä¸Šèª²ç¨‹ï½œåˆ©ç”¨ç·šä¸Šè³‡æºå¯¦ä½œside projects",
        desc: [
          "åœ¨ç¶²è·¯ä¸Šå­¸ç¿’äº†Vue.jsã€firebase realtime databaseç­‰æŠ€è¡“ï¼Œä¸¦åˆ©ç”¨æ‰€å­¸çš„æŠ€è¡“å¯¦ä½œside projectsã€‚",
          "åœ¨side projectsä¸­é‹ç”¨æ‰€å­¸çš„æŠ€è¡“ï¼Œä½¿æˆ‘å°æ–¼å‰ç«¯é–‹ç™¼æœ‰æ›´æ·±å…¥çš„äº†è§£ã€‚"
        ]
      }
    ],
    color:"#C42D8C"
  },

  {
    title:"éœå®œå¤§å­¸è³‡è¨Šå·¥ç¨‹å­¸ç³»",
    date:"2015 - 2019",
    descrArr:[
      {
        subtitle:"å¤§å­¸ç”Ÿæ¶¯ï½œå­¸ç¿’å°ˆæ¥­æŠ€è¡“ã€ç«¶è³½ä½³ä½œã€åœ˜éšŠåˆ†å·¥",
        desc: [
          `ä½¿ç”¨Android Studioé–‹ç™¼ç•¢æ¥­å°ˆé¡Œ"LINEUP"ã€‚é€™å€‹å°ˆæ¡ˆæ—¨åœ¨å¹«åŠ©åº—å®¶ç³»çµ±æ€§åœ°æ§åˆ¶æ’éšŠç‹€æ³ï¼Œä»¥æœ€ç›´æ¥çš„æ–¹å¼ç¯€çœæ¶ˆè²»è€…çš„ç­‰å¾…æ™‚é–“ï¼ŒåŒæ™‚å–ä»£å‚³çµ±ç´™å¼µçš„æµªè²»ã€‚`,
          "åœ¨å°ˆæ¡ˆä¸­è² è²¬æ’°å¯«å®¢æˆ¶ç«¯çš„å‰ç«¯åŠŸèƒ½ï¼Œä¸¦èˆ‡åœ˜éšŠæˆå“¡å…±åŒè¦åŠƒæ•´é«”ä»‹é¢å’Œè³‡æ–™ä¸²æ¥ã€‚",
          "æ“”ä»»èˆ‡æ•™æˆå’Œåœ˜éšŠä¹‹é–“æºé€šçš„æ©‹æ¨‘è§’è‰²ï¼Œç¢ºä¿é–‹æœƒæœ‰æ¢ç†ï¼Œä¸¦èƒ½äº‹å¾Œæª¢è¨å’Œæ”¹å–„æ•ˆç‡ï¼Œæ¨é€²å°ˆæ¡ˆé€²åº¦ã€‚"
        ]
      },
      {
        subtitle:"ç¤¾åœ˜ç¶“æ­·ï½œè·³è„«èˆ’é©åœˆã€é ˜å°èƒ½åŠ›åŸ¹é¤Šã€çµ„ç¹”åˆä½œä¹‹é‡è¦æ€§ï¼š",
        desc: [
          "æ“”ä»»ç³»ä¸Šæ¦®è­½å­¸é•·å§ï¼Œå¸¶é ˜æ–°ç”Ÿèå…¥æ ¡åœ’ï¼Œä¸¦æä¾›å­¸æ¥­å’Œç”Ÿæ´»ä¸Šçš„è¼”å°ã€‚",
          "å‰µç«‹ç¤¾åœ˜ã€æŒ‘æˆ°è‡ªæˆ‘ï¼Œèˆ‡ä¸åŒç§‘ç³»çš„é™Œç”ŸåŒå­¸ä¸€èµ·ç±ŒåŠƒå‰µç«‹ç¤¾åœ˜ã€‚é€™ä½¿æˆ‘å­¸ç¿’å¦‚ä½•è£½ä½œä¼åŠƒä¸¦èªªæœå­¸æ ¡åŒæ„ç¤¾åœ˜æˆç«‹ï¼ŒåŒæ™‚åŸ¹é¤Šäº†å‹‡æ–¼è·¨å…¥æœªçŸ¥é ˜åŸŸçš„èƒ½åŠ›ã€‚",
          "æ“”ä»»å¹¹éƒ¨è·ä½ï¼Œè² è²¬è¦åŠƒæ´»å‹•ã€‚åœ¨çŸ­çŸ­ä¸€å¹´å…§ï¼ŒæˆåŠŸå¸å¼•äº†è¶…é100åç¤¾å“¡åŠ å…¥ï¼Œé€²ä¸€æ­¥æå‡äº†æˆ‘çš„äººéš›é—œä¿‚è™•ç†å’Œçµ±ç±Œèƒ½åŠ›ã€‚"
        ]
      },
    ],
    color:"#43d3d5"

  },
]
</script>

<template lang='pug'>
.timeline-area
  .line
  .ul
    .li(
      v-for="(item,index) of experienceDataArr"
      :key="index"
      :class="`item${index}`"
      :style="`--accent-color: ${ item.color }`"
    )
      .card
        .date {{ item.date }}
        .content
          .title {{ `# ${item.title}` }}
          .descr-area(v-for="descr of item.descrArr" :key="descr")
            .subtitle {{ descr.subtitle }}
            .desc(v-for="desc of descr.desc" :key="desc")
              img(:src="gif" style="width: 22px; padding-right:5px;")
              span {{ desc }}
      .dot(:class="`dot${index}`")
</template>

<style lang="scss" scoped>
.timeline-area {
  position: relative;
  margin: 100px 20px 0 20px;
  .line {
    // content: "";
    position: absolute;
    left: 50%;
    transform: translate(-50%, 0);
    width: 5px;
    height: 0%;
    border-radius: 20px;
    background-color: white;
    @media (max-width: 768px) {
      left: 20px;
    }
  }
}

.ul {
  width: 100%;
  color: black;
  display: grid;
  grid-template-columns: 0.25rem 1fr;
  grid-auto-columns: max-content;
  column-gap: 2rem;
  list-style: none;
  // width: min(60rem, 90%);
  margin-inline: auto;

  .li:nth-child(odd) {
    .dot {
      // z-index: 100;
      transform: translate(-50%, 0);
      right: -78px;
      @media (max-width: 768px) {
        left: -40px;
      }
    }
  }
  .li:nth-child(even) {
    .dot {
      // z-index: 100;
      transform: translate(50%, 0);
      left: -78px;
      @media (max-width: 768px) {
        left: -60px;
      }

    }
  }
  .li {
    // opacity: 0;
    position: relative;
    grid-column: 2;
    margin-inline: 1.5rem;
    grid-row: span 2;
    display: grid;
    grid-template-rows: min-content min-content min-content;
    .dot {
      opacity: 0;
      top: 15px;
      position: absolute;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background-color: var(--accent-color);
    }

    .card:hover {
      transition: all 0.3s ease-in-out;
      // scale: 1.1;
      transform: translateY(-10px);
      @media (max-width: 768px) {
        // left: -60px;
        transform: translateY(0);
      }
    }

    .date {
      font-family: Chokokutai;
      height: 3rem;
      margin-inline: calc(1.5rem * -1);
      text-align: center;
      box-shadow: inset -6px -10px 9px rgba(0, 0, 0, 0.1);
      background-color: var(--accent-color);
      color: white;
      font-size: 1.8rem;
      font-weight: 700;
      letter-spacing: 5px;
      display: grid;
      place-content: center;
      position: relative;
      border-radius: calc(3rem / 2) 0 0 calc(3rem / 2);
      @media (max-width: 768px) {
        font-size: 1.2rem;
      }
      &::before {
        content: "";
        width: 30px;
        height: 20px;
        background: var(--accent-color);
        background-image: linear-gradient(rgba(0, 0, 0, 0.2) 100%, transparent);
        position: absolute;
        top: 100%;
        clip-path: polygon(0 0, 100% 0, 0 100%);
        right: 0;
      }
    }
    .content {
      color: white;
      background-image: linear-gradient(-180deg, #924d85 0%, #104454 100%);
      border: 1px solid #e6e6e6;
      border-top: #a3a3a3;
      position: relative;
      padding: 20px 25px;
      border-radius: 0 0px 20px 20px;
      .title {
        overflow: hidden;
        font-weight: 500;
        color: #f4ff55;
        font-size: 0.9rem;
        padding-bottom: 8px;
      }
      .descr-area {
        padding-block-end: 1.5rem;
        font-weight: 300;
        .subtitle {
          font-size: 1.2rem;
          font-weight: 500;
        }
        .desc {
          padding-top: 5px;
          font-size: 0.9rem;
        }
      }
    }
  }
}

/* row gaps */
.li:not(:last-child) {
  margin-bottom: 2rem;
}

/* shadows */
.title::before {
  content: "";
  position: absolute;
  width: 100%;
  height: 8px;
  top: -6px;
  background: rgba(0, 0, 0, 0.5);
  left: 50%;
  border-radius: 50%;
  filter: blur(5px);
  transform: translate(-50%, 50%);
}

.descr-area::before {
  z-index: -1;
  bottom: 0.25rem;
}

@media (min-width: 768px) {
  .line {
    left: 0;
  }
  .ul {
    grid-template-columns: 1fr 0.25rem 1fr;
  }

  .li:nth-child(odd) {
    grid-column: 1;
    // .dot {
    //   // z-index: 100;
    //   // right: -78px;
    //   left: 20px;
    // }
  }
  .li:nth-child(even) {
    grid-column: 3;
    // .dot {
    //   // z-index: 100;
    //   // left: -78px;
    //   left: 20px;

    // }
  }
  /* start second card */
  .li:nth-child(2) {
    grid-row: 2/4;
  }

  .li:nth-child(odd) .date {
    border-radius: 0 calc(3rem / 2) calc(3rem / 2) 0;
    &::before {
      clip-path: polygon(0 0, 100% 0, 100% 100%);
      left: 0;
    }
    &::after {
      transform: translate(-50%, -50%);
      left: calc(100% + 2rem + 0.25rem / 2);
    }
  }
  .li:not(:last-child) {
    margin-bottom: 2rem;
  }
}
</style>
